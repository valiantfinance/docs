
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Valiant API</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all_nosearch.js"></script>
  </head>

  <body class="index" data-languages="[&quot;javascript&quot;,&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="shell">shell</a>
        </div>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#valiant-api" class="toc-h1 toc-link" data-title="valiant-api">ü¶Å Valiant API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#introduction" class="toc-h2 toc-link" data-title="introduction">Introduction</a>
                  </li>
                  <li>
                    <a href="#sandbox-amp-testing" class="toc-h2 toc-link" data-title="sandbox-amp-testing">Sandbox &amp; testing</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#headers" class="toc-h2 toc-link" data-title="headers">Headers</a>
                  </li>
                  <li>
                    <a href="#testing-authentication-headers" class="toc-h2 toc-link" data-title="testing-authentication-headers">Testing authentication headers</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#leads" class="toc-h1 toc-link" data-title="leads">Leads</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-a-lead" class="toc-h2 toc-link" data-title="create-a-lead">Create a Lead</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="errors">Errors</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#http-status-code-summary" class="toc-h2 toc-link" data-title="http-status-code-summary">HTTP status code summary</a>
                  </li>
              </ul>
          </li>
      </div>
        <ul class="toc-footer">
            <li>Made in Sydney, Australia by <a href="https://valiant.finance/">Valiant</a> üá¶üá∫</li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='valiant-api'>ü¶Å Valiant API</h1><h2 id='introduction'>Introduction</h2>
<p>Welcome to the Valiant API!</p>

<p>The Valiant API is a <a href="http://en.wikipedia.org/wiki/Representational_State_Transfer">RESTful</a> API with predictable, resource-oriented URLs, and uses semantic HTTP response codes to indicate API errors. Our API supports <a href="http://en.wikipedia.org/wiki/Cross-origin_resource_sharing">cross-origin resource sharing (CORS)</a>, allowing you to securely consume our API from any client-side web application. <a href="http://www.json.org/">JSON</a> is returned by all resource related API responses and all API requests must be made over <a href="http://en.wikipedia.org/wiki/HTTP_Secure"><code>HTTPS</code></a>. The API follows the <a href="http://jsonapi.org/"><code>json:api</code></a> specification for all requests and responses.</p>

<aside class="notice">
  To get started with our API please send through a request to <a href="mailto:dev@valiant.finance">dev@valiant.finance</a> with your details, your company's details, and why you would like to use the API and we will onboard you.
</aside>
<h2 id='sandbox-amp-testing'>Sandbox &amp; testing</h2>
<p>As a part of on-boarding we will provide both a set of Sandbox and Production API credentials. All endpoint paths for both APIs are the same however the root domain differs as detailed below.</p>

<ul>
<li><strong>Sandbox</strong> ‚Äì <a href="https://mercury-summer.valiant.finance/"><code>https://mercury-summer.valiant.finance/</code></a></li>
<li><strong>Production</strong> ‚Äì <a href="https://valiant.finance/"><code>https://valiant.finance/</code></a></li>
</ul>

<p>To test the API Sandbox we recommend using <a href="https://www.getpostman.com/">Postman</a>. We couldn&#39;t live without it! üìÆ</p>
<h1 id='authentication'>Authentication</h1>
<p>üîê</p>

<p>Security is paramount at Valiant so all calls made to our API are authenticated. Once you have been given access to the API, you will receive a Valiant API <code>uuid</code>,  <code>key</code> and <code>secret</code> which are the credentials that allow access to the API. These parameters are used to generate a set of <code>HTTP</code> headers that are used to authenticate requests.</p>

<p>The content type of all calls made to the API are also verified. The <strong><code>Content-Type</code></strong> header in every request must be set to <code>application/vnd.api+json</code>.</p>

<aside class="warning">
  ‚ö†Ô∏è Be sure to never expose your API <code>key</code>, <code>secret</code> or <code>signed key</code> in any publicly accessible areas like GitHub, client-side code or website logs!
</aside>
<h2 id='headers'>Headers</h2>
<p>We authenticate and verify all API requests via three HTTP headers that are required to be set in all API requests.</p>

<table><thead>
<tr>
<th>Header</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong><code>X-AUTH-ID</code></strong></td>
<td>Your API client <code>uuid</code> that is provided once your API account has been established.</td>
</tr>
<tr>
<td><strong><code>X-AUTH-SIGNED-KEY</code></strong></td>
<td>A <code>base64</code> string generated by <code>HMAC-SHA256</code> signing your API <code>key</code> with your API <code>secret</code>.</td>
</tr>
<tr>
<td><strong><code>Content-Type</code></strong></td>
<td>All requests must be set to <code>application/vnd.api+json</code>.</td>
</tr>
</tbody></table>
<h3 id='generating-your-signed-key'>Generating your signed key</h3>
<p>To generate your <code>signed key</code> for the <strong><code>X-AUTH-SIGNED-KEY</code></strong> header you must generate a <code>base64</code> string of <code>HMAC-SHA256</code> signing your API <code>key</code> with your API <code>secret</code>.</p>

<p>A great resource that provides examples of generating <code>base64</code> hashes using <code>HMAC-SHA256</code> in a variety of different languages can be found <a href="https://www.jokecamp.com/blog/examples-of-creating-base64-hashes-using-hmac-sha256-in-different-languages/">here</a>.</p>
<h3 id='unauthorized-amp-unverified-requests'>Unauthorized &amp; unverified requests</h3>
<ul>
<li>Any API requests made without valid authentication headers will fail and return a <code>401 Unauthorized</code> status.</li>
<li>Any API requests made without the correct content type will fail and return a <code>400 Bad Request</code> status.</li>
</ul>
<h2 id='testing-authentication-headers'>Testing authentication headers</h2>
<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">"GET"</span><span class="p">,</span> <span class="s2">"https://mercury-summer.valiant.finance/api/v1/authenticate"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="s2">"X-AUTH-ID"</span><span class="p">,</span>         <span class="s2">"&lt;API_ID&gt;"</span><span class="p">)</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="s2">"X-AUTH-SIGNED-KEY"</span><span class="p">,</span> <span class="s2">"&lt;API_SIGNED_KEY&gt;"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="s2">"Content-Type"</span><span class="p">,</span>      <span class="s2">"application/vnd.api+json"</span><span class="p">);</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl GET <span class="se">\</span>
  https://mercury-summer.valiant.finance/api/v1/authenticate <span class="se">\</span>
  -H <span class="s1">'X-AUTH-ID: &lt;API_ID&gt;'</span> <span class="se">\</span>
  -H <span class="s1">'X-AUTH-SIGNED-KEY: &lt;API_SIGNED_KEY&gt;'</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/vnd.api+json'</span> <span class="se">\</span>
</code></pre>
<p>We have created an API endpoint which an empty request can be sent to in order to check if authentication headers have  been set correctly.</p>

<table><thead>
<tr>
<th>Item</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td>Endpoint</td>
<td><code>/api/v1/authenticate</code></td>
</tr>
<tr>
<td>Supported methods</td>
<td><code>GET</code></td>
</tr>
<tr>
<td>Description</td>
<td>Test if authentication headers are correctly set. If the authentication &amp; content type headers are set correctly, the endpoint will return a 200 OK status with an empty body. If authentication headers aren&#39;t set correctly the endpoint will return a 401 Unauthorized header with an empty body.</td>
</tr>
</tbody></table>
<h1 id='leads'>Leads</h1>
<p>üèÖ</p>

<p>Our Lead API allows third parties to directly submit Leads to Valiant via the API.</p>
<h2 id='create-a-lead'>Create a Lead</h2>
<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"first_name"</span><span class="p">:</span>     <span class="s2">"Isaac"</span><span class="p">,</span>
  <span class="s2">"last_name"</span><span class="p">:</span>      <span class="s2">"Newton"</span><span class="p">,</span>
  <span class="s2">"phone"</span><span class="p">:</span>          <span class="s2">"0400000000"</span><span class="p">,</span>
  <span class="s2">"email"</span><span class="p">:</span>          <span class="s2">"api@valiant.finance"</span><span class="p">,</span>
  <span class="s2">"months_trading"</span><span class="p">:</span> <span class="s2">"12"</span>
<span class="p">}</span>

<span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">"POST"</span><span class="p">,</span> <span class="s2">"https://mercury-summer.valiant.finance/api/v1/leads"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="s2">"X-AUTH-ID"</span><span class="p">,</span>         <span class="s2">"&lt;API_ID&gt;"</span><span class="p">)</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="s2">"X-AUTH-SIGNED-KEY"</span><span class="p">,</span> <span class="s2">"&lt;API_SIGNED_KEY&gt;"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="s2">"Content-Type"</span><span class="p">,</span>      <span class="s2">"application/vnd.api+json"</span><span class="p">);</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">params</span><span class="p">));</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
  https://mercury-summer.valiant.finance/api/v1/leads <span class="se">\</span>
  -H <span class="s1">'X-AUTH-ID: &lt;API_ID&gt;'</span> <span class="se">\</span>
  -H <span class="s1">'X-AUTH-SIGNED-KEY: &lt;API_SIGNED_KEY&gt;'</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/vnd.api+json'</span> <span class="se">\</span>
  -d <span class="s1">'{
    "first_name": "Isaac",
    "last_name": "Newton",
    "email": "api@valiant.finance",
    "phone": "0400000000",
    "months_trading": "12"
}'</span>
</code></pre>
<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6bbba93f-48c4-413b-88cf-de6436ccb20c"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"leads"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"created-at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-02-01T00:00:00.001Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Item</th>
<th>Details</th>
</tr>
</thead><tbody>
<tr>
<td>Endpoint</td>
<td><code>/api/v1/leads</code></td>
</tr>
<tr>
<td>Supported methods</td>
<td><code>POST</code></td>
</tr>
<tr>
<td>Description</td>
<td>Submits a Lead with the given details to Valiant.</td>
</tr>
</tbody></table>
<h3 id='accepted-params'>Accepted Params</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Required?</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>first_name</td>
<td><code>true</code></td>
<td><code>string</code></td>
<td>A string less than 255 characters long</td>
</tr>
<tr>
<td>last_name</td>
<td><code>true</code></td>
<td><code>string</code></td>
<td>A string less than 255 characters long</td>
</tr>
<tr>
<td>phone</td>
<td><code>true</code></td>
<td><code>string</code></td>
<td>Must be an Australian phone number and can begin with all valid local area codes, 1800 or 1300.</td>
</tr>
<tr>
<td>email</td>
<td><code>true</code></td>
<td><code>string</code></td>
<td>Must conform to a valid email address.</td>
</tr>
<tr>
<td>requested_amount</td>
<td><code>false</code></td>
<td><code>integer</code></td>
<td>The amount of the loan being requested. Must be a value greater than 0 if provided.</td>
</tr>
<tr>
<td>months_trading</td>
<td><code>false</code></td>
<td><code>integer</code></td>
<td>The months the Lead&#39;s business has been trading. Must be a value greater than 0 if provided.</td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1>
<p>‚ö†Ô∏è</p>

<p>The Valiant API uses conventional <code>HTTP</code> response codes to indicate the the <a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes"><code>HTTP</code> status</a> an API request.</p>

<ul>
<li>HTTP status codes in the <code>2xx</code> range indicate <strong>success üéâ</strong></li>
<li>HTTP status codes in the <code>4xx</code> range indicate an <strong>error</strong> given the request üö´

<ul>
<li>e.g., the request was unauthorized, a required parameter was omitted, a validation failed, etc.</li>
</ul></li>
<li>HTTP status codes in the <code>5xx</code> range indicate an <strong>internal server error</strong> on the Valiant side üí•</li>
</ul>
<h3 id='http-status-code-summary'>HTTP status code summary</h3>
<table><thead>
<tr>
<th>Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td><code>200 OK</code></td>
<td>Everything worked as expected.</td>
</tr>
<tr>
<td><code>201 Created</code></td>
<td>The resource was created successfully.</td>
</tr>
<tr>
<td><code>400 Bad Request</code></td>
<td>The request was unacceptable, often due to missing a required parameter.</td>
</tr>
<tr>
<td><code>401 Unauthorized</code></td>
<td>No valid authentication headers found.</td>
</tr>
<tr>
<td><code>402 Request Failed</code></td>
<td>The parameters were valid but the request failed.</td>
</tr>
<tr>
<td><code>404 Not Found</code></td>
<td>The requested resource doesn&#39;t exist.</td>
</tr>
<tr>
<td><code>500 Server Error</code></td>
<td>Something went wrong on Valiant&#39;s end.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
